{% extends "layout.html" %}

{% block content %}
    {% for category in results %}
        <a href="#"><p>{{ category.Title }}</p></a> 
            <ul>
                {% for option in category.Option %}
                    <li id="{{ option.Title }}">{{ option.Title }}</li>
                    <ol>
                        {% for card in option.Card %}
                        <a href=""><li>{{ card.Title }}</li></a>
                        <ul>
                            <li>{{ card.ImageUrl }}</li>
                            <li>{{ card.Describe }}</li>
                            <li>{{ card.Url }}</li>
                        </ul>
                        {% endfor %}
                        <li><button class="cardBtn btn" data-toggle="modal" data-target="#cardForm" data-optionid="{{ option.Option_id }}">添加选项</button></li>
                    </ol>
                {% endfor %}
            </ul>
    {% endfor %}

    <div class="modal fade" id="cardForm">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/add/card?_csrf={{ ctx.csrf | safe }}" method="post" role="form" enctype="multipart/form-data">
                    <input type="hidden" class="form-control" name="option_id" id="cardid"> 
                    <div class="form-group">
                        <label>Title:</label>
                        <input type="text" class="form-control" name="title">
                    </div>
                    <div class="form-group">
                        <label>Describe:</label>
                        <input type="text" class="form-control" name="describe">
                    </div>
                    <div class="form-group">
                        <label>Url:</label>
                        <input type="text" class="form-control" name="url">
                    </div>
                    <div class="form-group">
                        <label>Image:</label>
                        <input type="file" class="form-control" name="image">
                    </div>
                    <div class="form-group">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        <button type="submit" class="btn btn-default">提交</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}